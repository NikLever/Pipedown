<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/svg+xml" href="./icon.svg" />
  <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans|Kavivanar" rel="stylesheet">
  <title>Pipedown</title>
  <style>
    body{ padding: 0; margin: 0; }
    canvas{ position: fixed; top: 0; left: 0; }
	#info { color: #fff; position: absolute; top: 10px; width: 100%; text-align: center; z-index: 100; display:block; }
	#info a { color: #046; font-weight: bold; }
	#level{ position: fixed; display: block; width: 80px; top: 0; left: 15px; padding: 0; margin: 0; text-align: center;
		font-family: 'IBM Plex Sans', sans-serif; font-size: 20px; z-index: 100; pointer-events: none; }
	#level p, #score p, #moves p{ width: 100%; margin: 0; padding: 0; }
	#score{ position: fixed; display: block; width: 140px; top: 0; right: 15px; padding: 0; margin: 0; text-align: center;
		font-family: 'IBM Plex Sans', sans-serif; font-size: 20px; z-index: 100; pointer-events: none; }
	#moves{ position: fixed; display: block; width: 100px; bottom: 0; color: #3D455C; left: 15px; padding: 0; margin: 0;
		text-align: center; font-family: 'IBM Plex Sans', sans-serif; font-size: 20px; z-index: 100; pointer-events: none; }
	.ui-text{ font-family: 'IBM Plex Sans', sans-serif; font-size: 55px; line-height: 55px; }
	#message{ position:absolute; left: 50%; top: 50%; transform: translateX(-50%) translateY(-50%);
		font-family: 'Kavivanar', san-serif; font-size: 40px; width:80%; max-width:280px; padding: 15px 15px 50px 15px;
		text-align: center; display:none; flex-wrap: wrap; align-content: center; justify-content: center;
		background-color: aliceblue; border: medium solid #3D455C; border-radius: 20px; color: #3D455C; z-index: 99; }
	#message_ok{ position: absolute; bottom: 10px; padding: 10px 20px 10px 20px; font-family: sans-serif; font-size: 20px;
		background-color: #3D455C; color: #fff; border-radius: 8px; border: medium solid #696882; }
	#hint{ position: absolute; bottom: 10px; right: 10px; padding: 10px 20px 10px 20px; font-family: sans-serif; font-size: 20px;
		background-color: #3D455C; color: #fff; border-radius: 8px; border: medium solid #696882; z-index: 99; }
	#reset{ position: absolute; background-color: transparent; bottom: 70px; right: 30px; width: 50px; height: 50px;
		border: none; margin: 0; padding: 0; z-index: 99; }
	#logo{ position: absolute; left: 50%; top: 50%; width:70%; transform: translate( -50%, -50% ); z-index: 100;
		transition-property: top; transition-duration: 1s; transition-timing-function: ease-in; transition-delay: 2s;}
	#logo img { width: 100%; object-fit: contain; }	
  </style>
</head>
<body>
  <div id="logo"><img src="logo.png" /></div>
  <div id="message">
    <p id="message_text"></p>
	<div id="paypal-button-container" style="display: none;"></div>
    <button id="message_ok">OK</button>
  </div>
  <div id="level"><p>LEVEL</p><p id="level_text" class="ui-text">0</p></div>
  <div id="score"><p>SCORE</p><p id="score_text" class="ui-text">0</p></div>
  <div id="moves"><p id="moves_text" class="ui-text">0(0)</p><p>MOVES</p></div>
  <button id="hint">HINT</button>
  <button id="reset"><img src="./reset.png" width="50" height="50"></button>
   <!-- Set up a container element for the button -->

   <!-- Include the PayPal JavaScript SDK -->
   <!--<script src="https://www.paypal.com/sdk/js?client-id=AeJ-QER2Miu-Mmlnhbg2imZ4Qbzz9kAc_qfgUZ7Vt-IYL8PPExRB7z2HWJFEYU_rQleYrcoHgilYMauP&currency=USD"></script>

   <script>
	   // Render the PayPal button into #paypal-button-container
	   paypal.Buttons({

		   // Call your server to set up the transaction
		   createOrder: function(data, actions) {
			   return fetch('/demo/checkout/api/paypal/order/create/', {
				   method: 'post'
			   }).then(function(res) {
				   return res.json();
			   }).then(function(orderData) {
				   return orderData.id;
			   });
		   },

		   // Call your server to finalize the transaction
		   onApprove: function(data, actions) {
			   return fetch('/demo/checkout/api/paypal/order/' + data.orderID + '/capture/', {
				   method: 'post'
			   }).then(function(res) {
				   return res.json();
			   }).then(function(orderData) {
				   // Three cases to handle:
				   //   (1) Recoverable INSTRUMENT_DECLINED -> call actions.restart()
				   //   (2) Other non-recoverable errors -> Show a failure message
				   //   (3) Successful transaction -> Show confirmation or thank you

				   // This example reads a v2/checkout/orders capture response, propagated from the server
				   // You could use a different API or structure for your 'orderData'
				   var errorDetail = Array.isArray(orderData.details) && orderData.details[0];

				   if (errorDetail && errorDetail.issue === 'INSTRUMENT_DECLINED') {
					   return actions.restart(); // Recoverable state, per:
					   // https://developer.paypal.com/docs/checkout/integration-features/funding-failure/
				   }

				   if (errorDetail) {
					   var msg = 'Sorry, your transaction could not be processed.';
					   if (errorDetail.description) msg += '\n\n' + errorDetail.description;
					   if (orderData.debug_id) msg += ' (' + orderData.debug_id + ')';
					   return alert(msg); // Show a failure message (try to avoid alerts in production environments)
				   }

				   // Successful capture! For demo purposes:
				   console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));
				   var transaction = orderData.purchase_units[0].payments.captures[0];
				   alert('Transaction '+ transaction.status + ': ' + transaction.id + '\n\nSee console for all available details');

				   // Replace the above to show a success message within this page, e.g.
				   // const element = document.getElementById('paypal-button-container');
				   // element.innerHTML = '';
				   // element.innerHTML = '<h3>Thank you for your payment!</h3>';
				   // Or go to another URL:  actions.redirect('thank_you.html');
			   });
		   }

	   }).render('#paypal-button-container');
   </script>-->
  <script type="importmap">
    {
      "imports": {
        "three": "../../../node_modules/three/build/three.module.js",
        "three/addons/": "../../../node_modules/three/examples/jsm/"
      }
    }
  </script>
  <script type="module">
    import { Game } from "./Game.js"
    const game = new Game();
  </script>
</body>
</html>